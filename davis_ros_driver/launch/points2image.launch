<launch>  
	<!-- DELAY PARAM-->
	<arg name="rectifier_delay" default="2.0" />
	<arg name="pixel_cloud_fusion_delay" default="4.0" />
	<arg name="Points2Image_delay" default="7.0" />

	<!-- TOPIC PARAM-->
	<arg name="LiDAR_src" default="/velodyne_points" />
	<arg name="camera_id" default="/dvs" />
	<arg name="raw_image_src" default="/dvs/image_raw" />
	<arg name="rectified_image_src" default="$(arg camera_id)/image_rectified" />
	<arg name="camera_info_src" default="$(arg camera_id)/dvs_info" />
	<arg name="projection_matrix_topic" default="$(arg camera_id)/projection_matrix" />





	<!--Calibration Publisher -->
	<node pkg="calibration_publisher" type="calibration_publisher" name="calibration_publisher" output="screen">
		<param name= "target_frame" value= "velodyne" />
		<param name= "camera_frame" value= "davis" />
		<param name= "calibration_file" value= "/home/hermes-18/event_camera/calibration/1030_ev_32li_ePnP21p.yaml" />
		<param name= "register_lidar2camera_tf" value= "True" />
		<param name= "publish_extrinsic_mat" value= "True" />
		<param name= "publish_camera_info" value= "True" />
		<param name= "camera_info_topic" value= "$(arg camera_info_src)" />
		<param name= "image_topic_src" value= "$(arg raw_image_src)" />
		<param name= "projection_matrix_topic" value= "$(arg projection_matrix_topic)" />
		<param name= "camera_id" value= "$(arg camera_id)" />
	</node>


	<!--Points2Image-->
	<node name="points2image" pkg="points2image" type="points2image" launch-prefix="bash -c 'sleep $(arg Points2Image_delay); $0 $@' " output="screen">
		<param name="points_node" value="$(arg LiDAR_src)" />
		<param name="projection_matrix_topic" value="$(arg projection_matrix_topic)" />
		<param name="camera_info_topic" value="$(arg camera_info_src)" />
	</node>
	<node pkg="rviz" type="rviz" name="rviz">
	</node>
</launch>
